// ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚Øª ÙˆØ§Ù„ØªØ§Ø±ÙŠØ®
function updateTime() {
  const now = new Date();
  const days = ['Ø§Ù„Ø£Ø­Ø¯', 'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†', 'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡', 'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡', 'Ø§Ù„Ø®Ù…ÙŠØ³', 'Ø§Ù„Ø¬Ù…Ø¹Ø©', 'Ø§Ù„Ø³Ø¨Øª'];
  const months = ['Ø¬Ø§Ù†ÙÙŠ', 'ÙÙŠÙØ±ÙŠ', 'Ù…Ø§Ø±Ø³', 'Ø£ÙØ±ÙŠÙ„', 'Ù…Ø§ÙŠ', 'Ø¬ÙˆØ§Ù†', 'Ø¬ÙˆÙŠÙ„ÙŠØ©', 'Ø£ÙˆØª', 'Ø³Ø¨ØªÙ…Ø¨Ø±', 'Ø£ÙƒØªÙˆØ¨Ø±', 'Ù†ÙˆÙÙ…Ø¨Ø±', 'Ø¯ÙŠØ³Ù…Ø¨Ø±'];
  const day = days[now.getDay()];
  const date = now.getDate();
  const month = months[now.getMonth()];
  const hours = now.getHours().toString().padStart(2, '0');
  const minutes = now.getMinutes().toString().padStart(2, '0');
  const timeText = `${day} ${date} ${month} - ${hours}:${minutes}`;
  const timeEl = document.getElementById('current-time');
  if (timeEl) timeEl.textContent = timeText;
}
setInterval(updateTime, 60000);
updateTime();

// Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª
function updateVisits() {
  let visits = localStorage.getItem('visit-count');
  visits = visits ? parseInt(visits) + 1 : 1;
  localStorage.setItem('visit-count', visits);
  const visitEl = document.getElementById('visit-count');
  if (visitEl) visitEl.textContent = `Ø¹Ø¯Ø¯ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª: ${visits}`;
}
updateVisits();

// Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ù…Ù† BBC
fetch('https://api.rss2json.com/v1/api.json?rss_url=http://feeds.bbci.co.uk/arabic/rss.xml')
  .then(res => res.json())
  .then(data => {
    const newsItems = data.items.slice(0, 5);
    const newsText = newsItems.map(item => `ðŸ“° ${item.title}`).join(' âš¡ ');
    const newsEl = document.getElementById('live-news');
    if (newsEl) newsEl.textContent = newsText;
  })
  .catch(() => {
    const newsEl = document.getElementById('live-news');
    if (newsEl) newsEl.textContent = 'âŒ ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±.';
  });

// Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø© (ÙØªØ­/ØºÙ„Ù‚)
document.querySelectorAll('.faq-item h3').forEach(header => {
  header.addEventListener('click', () => {
    header.parentElement.classList.toggle('open');
  });
});

// Ù…Ø´ØºÙ„ Ø§Ù„Ø±Ø§Ø¯ÙŠÙˆ
const radioBtn = document.getElementById('radio-btn');
const radioPlayer = document.getElementById('radio-player');
if (radioBtn && radioPlayer) {
  radioBtn.addEventListener('click', () => {
    if (radioPlayer.paused) {
      radioPlayer.play();
      radioBtn.textContent = 'â¸ï¸ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø±Ø§Ø¯ÙŠÙˆ';
    } else {
      radioPlayer.pause();
      radioBtn.textContent = 'â–¶ï¸ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø±Ø§Ø¯ÙŠÙˆ';
    }
  });
}

// ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ©
function toggleLang() {
  const current = localStorage.getItem('lang') || 'ar';
  const newLang = current === 'ar' ? 'fr' : 'ar';
  localStorage.setItem('lang', newLang);
  applyLang();
}

// ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù„ØºØ©
function applyLang() {
  const lang = localStorage.getItem('lang') || 'ar';
  document.documentElement.lang = lang;
  document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';

  const langBtn = document.querySelector('.lang-toggle');
  if (langBtn) langBtn.textContent = lang === 'ar' ? 'FranÃ§ais' : 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©';

  const translatable = document.querySelectorAll('.t');
  translatable.forEach(el => {
    if (el.dataset[lang]) el.textContent = el.dataset[lang];
  });

  const title = document.getElementById('title');
  if (title) title.textContent = lang === 'ar' ? 'Ø®Ø¯Ù…Ø§Øª Ø§Ù„ÙˆØ±Ø´Ø©' : 'Nos Services';
}
applyLang();
