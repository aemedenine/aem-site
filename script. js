const translations = {
  ar: {
    visits: "Ø¹Ø¯Ø¯ Ø²ÙŠØ§Ø±Ø§ØªÙƒ: ",
    toggle: "ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ©",
    whatsapp: "ÙˆØ§ØªØ³Ø§Ø¨",
    maps: "Ù…ÙˆÙ‚Ø¹Ù†Ø§ Ø¹Ù„Ù‰ Google Maps",
    gallery: "Ø´Ø§Ù‡Ø¯ Ø§Ù„ØµÙˆØ±",
    video: "Ø´Ø§Ù‡Ø¯ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ",
    radioPlay: "Ø´ØºÙ‘Ù„ Ø§Ù„Ø±Ø§Ø¯ÙŠÙˆ",
    radioStop: "Ø£ÙˆÙ‚Ù Ø§Ù„Ø±Ø§Ø¯ÙŠÙˆ",
    badge: "ğŸŒ¼ Ø£ÙƒØ«Ø± Ù…Ù† 10 Ø³Ù†ÙˆØ§Øª Ø®Ø¨Ø±Ø©",
    faqTitle: "Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©",
    q1: "ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø¬Ù‡Ø§Ø² Ù„Ù„Ø¥ØµÙ„Ø§Ø­ØŸ",
    a1: "ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¬Ù‡Ø§Ø² Ø¹Ø¨Ø± Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø¥Ù„Ù‰ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙˆØ±Ø´Ø© Ø£Ùˆ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ù„ØªØ±ØªÙŠØ¨ Ø®Ø¯Ù…Ø© Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù….",
    q2: "Ù…Ø§ Ù‡ÙŠ Ù…Ø¯Ø© Ø§Ù„ØªØµÙ„ÙŠØ­ Ø§Ù„Ù…Ø¹ØªØ§Ø¯Ø©ØŸ",
    a2: "Ù…Ø¯Ø© Ø§Ù„ØªØµÙ„ÙŠØ­ ØªØ®ØªÙ„Ù Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ø¹Ø·Ù„ØŒ Ù„ÙƒÙ† ØºØ§Ù„Ø¨Ø§Ù‹ Ù„Ø§ ØªØªØ¬Ø§ÙˆØ² 3 Ø£ÙŠØ§Ù… Ø¹Ù…Ù„.",
    q3: "Ù‡Ù„ ØªÙˆÙØ±ÙˆÙ† Ù‚Ø·Ø¹ ØºÙŠØ§Ø± Ø£ØµÙ„ÙŠØ©ØŸ",
    a3: "Ù†Ø¹Ù…ØŒ Ù†ÙˆÙØ± Ù‚Ø·Ø¹ ØºÙŠØ§Ø± Ø£ØµÙ„ÙŠØ© ÙˆØ°Ø§Øª Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ© Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©.",
    q4: "ÙƒÙŠÙ Ø£ØªØ§Ø¨Ø¹ Ø­Ø§Ù„Ø© Ø§Ù„Ø¥ØµÙ„Ø§Ø­ØŸ",
    a4: "Ù†Ù‚ÙˆÙ… Ø¨Ø¥Ø±Ø³Ø§Ù„ ØµÙˆØ± ÙˆÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¬Ù‡Ø§Ø² Ø£Ø«Ù†Ø§Ø¡ Ù…Ø±Ø§Ø­Ù„ Ø§Ù„ØªØµÙ„ÙŠØ­ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨.",
    footer1: "ğŸ“ Ù…Ø¯Ù†ÙŠÙ† â€“ Ù†Ø®Ø¯Ù…Ùˆ ÙÙŠ ÙƒØ§Ù…Ù„ Ø£Ù†Ø­Ø§Ø¡ ØªÙˆÙ†Ø³ | ğŸ“² WhatsApp: 98192103",
    footer2: "â° Ù…Ù† Ø§Ù„Ø¥Ø«Ù†ÙŠÙ† Ù„Ù„Ø³Ø¨ØªØŒ 08:00 - 18:00 | Ø§Ù„Ø£Ø­Ø¯ Ø±Ø§Ø­Ø©",
    news: [
      "ğŸ“¢ ÙˆØ±Ø´Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠÙƒ Ø§Ù„Ø±Ø­Ù…Ø§Ù†ÙŠ ØªÙØªØ­ Ø£Ø¨ÙˆØ§Ø¨Ù‡Ø§ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª.",
      "ğŸ”§ Ø®Ø¯Ù…Ø§Øª ØªØµÙ„ÙŠØ­ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© Ø¨Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ© ÙˆØ¨Ø£Ø³Ø¹Ø§Ø± Ù…Ù†Ø§ÙØ³Ø©.",
      "ğŸŒ Ø§Ù„ØªÙˆØµÙŠÙ„ Ø¹Ø¨Ø± Ø§Ù„Ø¨Ø±ÙŠØ¯ Ù…ØªÙˆÙØ± Ù„ÙƒÙ„ Ø£Ù†Ø­Ø§Ø¡ ØªÙˆÙ†Ø³.",
      "ğŸ“± ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨ Ù„Ø£ÙŠ Ø§Ø³ØªÙØ³Ø§Ø±."
    ]
  },
  fr: {
    visits: "Nombre de visites : ",
    toggle: "Changer la langue",
    whatsapp: "WhatsApp",
    maps: "Voir sur Google Maps",
    gallery: "Voir les photos",
    video: "Voir les vidÃ©os",
    radioPlay: "Lancer la radio",
    radioStop: "ArrÃªter la radio",
    badge: "ğŸŒ¼ Plus de 10 ans d'expÃ©rience",
    faqTitle: "Questions frÃ©quentes",
    q1: "Comment puis-je envoyer un appareil pour rÃ©paration ?",
    a1: "Vous pouvez envoyer l'appareil par courrier Ã  l'atelier ou nous contacter pour organiser la collecte.",
    q2: "Quel est le dÃ©lai moyen de rÃ©paration ?",
    a2: "Le dÃ©lai dÃ©pend du type de panne, mais gÃ©nÃ©ralement pas plus de 3 jours ouvrables.",
    q3: "Fournissez-vous des piÃ¨ces d'origine ?",
    a3: "Oui, nous fournissons des piÃ¨ces d'origine et de haute qualitÃ© pour tous les appareils.",
    q4: "Comment suivre l'Ã©tat de la rÃ©paration ?",
    a4: "Nous envoyons des photos et vidÃ©os de l'Ã©tat de l'appareil pendant la rÃ©paration via WhatsApp.",
    footer1: "ğŸ“ MÃ©denine â€“ Service dans toute la Tunisie | ğŸ“² WhatsApp: 98192103",
    footer2: "â° Du lundi au samedi, 08:00 - 18:00 | Dimanche fermÃ©",
    news: [
      "ğŸ“¢ Atelier Electronique MÃ©denine ouvre ses portes pour toutes les rÃ©gions.",
      "ğŸ”§ Services de rÃ©paration Ã©lectronique de haute qualitÃ© Ã  prix compÃ©titifs.",
      "ğŸŒ Livraison par courrier disponible dans toute la Tunisie.",
      "ğŸ“± Contactez-nous via WhatsApp pour toute question."
    ]
  }
};

let currentLang = "ar";

function getVisitCount() {
  return parseInt(localStorage.getItem("aem-visit-count")) || 0;
}
function incrementVisitCount() {
  let count = getVisitCount();
  count++;
  localStorage.setItem("aem-visit-count", count);
}

function initFAQ() {
  document.querySelectorAll(".faq-item").forEach(item => {
    item.onclick = () => item.classList.toggle("open");
  });
}

function updateLanguage() {
  const t = translations[currentLang];
  document.documentElement.lang = currentLang;
  document.documentElement.dir = currentLang === "ar" ? "rtl" : "ltr";

  document.getElementById("visit-count").textContent = t.visits + getVisitCount();
  document.getElementById("toggle-lang-btn").textContent = t.toggle;
  document.querySelector(".btn-whatsapp").textContent = t.whatsapp;
  document.querySelector(".btn-maps").textContent = t.maps;
  document.querySelector(".btn-gallery").textContent = t.gallery;
  document.querySelector(".btn-video").textContent = t.video;

  const radioBtn = document.getElementById("radio-btn");
  const radio = document.getElementById("radio-stream");
  radioBtn.textContent = radio.paused ? t.radioPlay : t.radioStop;

  document.querySelector(".experience-badge").textContent = t.badge;

  const q = document.querySelectorAll(".faq-item h3");
  const a = document.querySelectorAll(".faq-item .answer");

  document.querySelector(".faq h2").textContent = t.faqTitle;
  q[0].textContent = t.q1;
  a[0].textContent = t.a1;
  q[1].textContent = t.q2;
  a[1].textContent = t.a2;
  q[2].textContent = t.q3;
  a[2].textContent = t.a3;
  q[3].textContent = t.q4;
  a[3].textContent = t.a4;

  document.querySelector("footer p:nth-of-type(1)").textContent = t.footer1;
  document.querySelector("footer p:nth-of-type(2)").textContent = t.footer2;

  updateNews();
  initFAQ(); // â† Ø¶Ø±ÙˆØ±ÙŠ Ù„Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙƒÙ„ÙŠÙƒ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ±Ø¬Ù…Ø©
}

function updateNews() {
  const t = translations[currentLang].news;
  document.getElementById("live-news").textContent = t.join(" â€¢ ");
}

function updateTime() {
  const now = new Date();
  const days = {
    ar: ['Ø§Ù„Ø£Ø­Ø¯','Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†','Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡','Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡','Ø§Ù„Ø®Ù…ÙŠØ³','Ø§Ù„Ø¬Ù…Ø¹Ø©','Ø§Ù„Ø³Ø¨Øª'],
    fr: ['Dimanche','Lundi','Mardi','Mercredi','Jeudi','Vendredi','Samedi']
  };
  const months = {
    ar: ['Ø¬Ø§Ù†ÙÙŠ','ÙÙŠÙØ±ÙŠ','Ù…Ø§Ø±Ø³','Ø£ÙØ±ÙŠÙ„','Ù…Ø§ÙŠ','Ø¬ÙˆØ§Ù†','Ø¬ÙˆÙŠÙ„ÙŠØ©','Ø£ÙˆØª','Ø³Ø¨ØªÙ…Ø¨Ø±','Ø£ÙƒØªÙˆØ¨Ø±','Ù†ÙˆÙÙ…Ø¨Ø±','Ø¯ÙŠØ³Ù…Ø¨Ø±'],
    fr: ['Janvier','FÃ©vrier','Mars','Avril','Mai','Juin','Juillet','AoÃ»t','Septembre','Octobre','Novembre','DÃ©cembre']
  };
  const day = days[currentLang][now.getDay()];
  const month = months[currentLang][now.getMonth()];
  const date = now.getDate();
  const time = now.toTimeString().slice(0, 8);
  const full = `${day}ØŒ ${date} ${month} - ${time}`;
  document.getElementById("current-time").textContent = full;
}

document.addEventListener("DOMContentLoaded", () => {
  incrementVisitCount();
  updateLanguage();
  updateTime();
  setInterval(updateTime, 1000);

  document.getElementById("toggle-lang-btn").onclick = () => {
    currentLang = currentLang === "ar" ? "fr" : "ar";
    updateLanguage();
  };

  document.getElementById("radio-btn").onclick = () => {
    const radio = document.getElementById("radio-stream");
    const btn = document.getElementById("radio-btn");
    if (radio.paused) {
      radio.play();
      btn.textContent = translations[currentLang].radioStop;
    } else {
      radio.pause();
      btn.textContent = translations[currentLang].radioPlay;
    }
  };

  initFAQ(); // â† Ø£ÙˆÙ„ Ù…Ø±Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
});
