// script.js - كامل الميزات التفاعلية مع إصلاح المشاكل

// ✅ عرض الوقت والتاريخ والشهر function updateTime() { const now = new Date(); const time = now.toLocaleTimeString('ar-TN'); const date = now.toLocaleDateString('ar-TN', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }); const currentTime = document.getElementById('current-time'); if (currentTime) { currentTime.textContent = ${time} - ${date}; } } setInterval(updateTime, 1000); updateTime();

// ✅ عدد الزيارات باستخدام localStorage const visitCountEl = document.getElementById('visit-count'); if (visitCountEl) { const visitCount = localStorage.getItem('visitCount') || 0; localStorage.setItem('visitCount', parseInt(visitCount) + 1); visitCountEl.textContent = عدد زياراتك: ${parseInt(visitCount) + 1}; }

// ✅ زر تشغيل الراديو const radioBtn = document.getElementById('radio-btn'); const radio = document.getElementById('radio-stream'); if (radioBtn && radio) { radioBtn.addEventListener('click', () => { if (radio.paused) { radio.play(); radioBtn.textContent = '⏸️ إيقاف الراديو'; } else { radio.pause(); radioBtn.textContent = '▶️ شغّل الراديو'; } }); }

// ✅ شريط الأخبار من BBC عربي async function loadNews() { try { const response = await fetch("https://api.rss2json.com/v1/api.json?rss_url=https://feeds.bbci.co.uk/arabic/rss.xml"); const data = await response.json(); const titles = data.items.slice(0, 5).map(item => item.title).join(" ⚡ "); const news = document.getElementById("live-news"); if (news) news.textContent = titles; } catch (error) { const news = document.getElementById("live-news"); if (news) news.textContent = "تعذر تحميل الأخبار"; } } loadNews();

// ✅ تغيير اللغة (عربي/فرنسي) للصفحة const toggleLangBtn = document.getElementById("toggle-lang-btn"); let currentLang = "ar"; if (toggleLangBtn) { toggleLangBtn.addEventListener("click", () => { currentLang = currentLang === "ar" ? "fr" : "ar"; document.documentElement.lang = currentLang; document.documentElement.dir = currentLang === "ar" ? "rtl" : "ltr"; toggleLanguageContent(); }); }

function toggleLanguageContent() { const isArabic = currentLang === "ar"; const translations = { ar: { title: "Atelier Electronique Médenine", langBtn: "تبديل اللغة", visitCount: عدد زياراتك: ${localStorage.getItem("visitCount")}, radioPlay: "▶️ شغّل الراديو", radioPause: "⏸️ إيقاف الراديو" }, fr: { title: "Atelier Électronique Médenine", langBtn: "Changer de langue", visitCount: Nombre de visites: ${localStorage.getItem("visitCount")}, radioPlay: "▶️ Lancer la radio", radioPause: "⏸️ Arrêter la radio" } };

const t = translations[currentLang]; const titleEl = document.querySelector("h1"); if (titleEl) titleEl.textContent = t.title; if (toggleLangBtn) toggleLangBtn.textContent = t.langBtn; if (visitCountEl) visitCountEl.textContent = t.visitCount; if (radioBtn && radio) { radioBtn.textContent = radio.paused ? t.radioPlay : t.radioPause; } }

// ✅ الأسئلة الشائعة تفتح وتغلق const faqItems = document.querySelectorAll(".faq-item"); faqItems.forEach(item => { item.addEventListener("click", () => { item.classList.toggle("open"); }); });

