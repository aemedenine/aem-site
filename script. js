// تحديث الوقت والتاريخ مع اسم اليوم والشهر بالعربي والفرنسي
function updateTime() {
  const now = new Date();
  const days = {
    ar: ['الأحد', 'الإثنين', 'الثلاثاء', 'الأربعاء', 'الخميس', 'الجمعة', 'السبت'],
    fr: ['Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi']
  };
  const months = {
    ar: ['جانفي', 'فيفري', 'مارس', 'أفريل', 'ماي', 'جوان', 'جويلية', 'أوت', 'سبتمبر', 'أكتوبر', 'نوفمبر', 'ديسمبر'],
    fr: ['Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre']
  };
  let lang = localStorage.getItem('lang') || 'ar';

  const dayName = days[lang][now.getDay()];
  const monthName = months[lang][now.getMonth()];
  const date = now.getDate();
  const hours = now.getHours().toString().padStart(2, '0');
  const minutes = now.getMinutes().toString().padStart(2, '0');

  document.getElementById('current-time').textContent = `${dayName} ${date} ${monthName} - ${hours}:${minutes}`;
}

// تحديث عداد الزيارات
function updateVisits() {
  let visits = localStorage.getItem('visit-count');
  visits = visits ? parseInt(visits) + 1 : 1;
  localStorage.setItem('visit-count', visits);
  document.getElementById('visit-count').textContent = `عدد الزيارات: ${visits}`;
}

// تشغيل/إيقاف راديو القرآن
let radioPlaying = false;
const radio = new Audio('https://server10.mp3quran.net/thubti'); // رابط الراديو

function toggleRadio() {
  if (!radioPlaying) {
    radio.play();
    radioPlaying = true;
    document.getElementById('radio-btn').textContent = '⏸️ إيقاف الراديو';
  } else {
    radio.pause();
    radioPlaying = false;
    document.getElementById('radio-btn').textContent = '▶️ تشغيل راديو القرآن';
  }
}

// تغيير اللغة وتحديث النصوص
function toggleLang() {
  let currentLang = localStorage.getItem('lang') || 'ar';
  let newLang = currentLang === 'ar' ? 'fr' : 'ar';
  localStorage.setItem('lang', newLang);
  applyLang();
}

function applyLang() {
  let lang = localStorage.getItem('lang') || 'ar';
  document.documentElement.lang = lang;
  document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';

  // تحديث زر اللغة إذا كان موجود
  const langBtn = document.querySelector('.lang-toggle');
  if (langBtn) {
    langBtn.textContent = lang === 'ar' ? 'Français' : 'العربية';
  }

  // تحديث النصوص متعددة اللغات بعنصر class=t data-ar, data-fr
  document.querySelectorAll('.t').forEach(el => {
    el.textContent = el.dataset[lang];
  });

  // تحديث الوقت فوراً
  updateTime();
}

// فتح وإغلاق نافذة الضوء (Lightbox) للصور
function openLightbox(src) {
  const lb = document.getElementById('lightbox');
  const lbImg = document.getElementById('lightbox-img');
  lbImg.src = src;
  lb.style.display = 'flex';
}

function closeLightbox() {
  const lb = document.getElementById('lightbox');
  lb.style.display = 'none';
}

// الأسئلة الشائعة: فتح وإغلاق الإجابة
document.addEventListener('DOMContentLoaded', () => {
  // إضافة مستمع للنقر على عناوين الأسئلة الشائعة
  document.querySelectorAll('.faq-item h3').forEach(header => {
    header.addEventListener('click', () => {
      header.parentElement.classList.toggle('open');
    });
  });

  // تشغيل الوقت والزيارات
  updateTime();
  updateVisits();
  setInterval(updateTime, 60000); // تحديث كل دقيقة

  // تطبيق اللغة المختارة
  applyLang();
});
