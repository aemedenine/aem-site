// ✅ شريط الأخبار من BBC عربي
const newsContainer = document.getElementById('live-news');
fetch("https://api.rss2json.com/v1/api.json?rss_url=https://feeds.bbci.co.uk/arabic/rss.xml")
  .then(res => res.json())
  .then(data => {
    let headlines = data.items.slice(0, 5).map(item => item.title).join(" ⚡ ");
    newsContainer.textContent = headlines;
  })
  .catch(() => {
    newsContainer.textContent = "فشل في تحميل الأخبار.";
  });

// ✅ الساعة والتاريخ والشهر
function updateTime() {
  const timeEl = document.getElementById('current-time');
  const now = new Date();
  const months = ["جانفي", "فيفري", "مارس", "أفريل", "ماي", "جوان", "جويلية", "أوت", "سبتمبر", "أكتوبر", "نوفمبر", "ديسمبر"];
  const day = now.getDate();
  const month = months[now.getMonth()];
  const year = now.getFullYear();
  const hours = now.getHours().toString().padStart(2, '0');
  const minutes = now.getMinutes().toString().padStart(2, '0');
  const seconds = now.getSeconds().toString().padStart(2, '0');
  timeEl.textContent = `${day} ${month} ${year} - ${hours}:${minutes}:${seconds}`;
}
setInterval(updateTime, 1000);
updateTime();

// ✅ عدد الزيارات
const visitCount = localStorage.getItem('visits') || 0;
localStorage.setItem('visits', parseInt(visitCount) + 1);
document.getElementById('visit-count').textContent = `عدد زياراتك: ${parseInt(visitCount) + 1}`;

// ✅ زر تشغيل الراديو
document.getElementById('radio-btn').addEventListener('click', () => {
  const radio = document.getElementById('radio-stream');
  if (radio.paused) {
    radio.play();
    document.getElementById('radio-btn').textContent = '⏸️ أوقف الراديو';
  } else {
    radio.pause();
    document.getElementById('radio-btn').textContent = '▶️ شغّل الراديو';
  }
});

// ✅ FAQ: فتح وغلق الأجوبة
document.querySelectorAll('.faq-item').forEach(item => {
  item.addEventListener('click', () => {
    item.classList.toggle('open');
  });
});

// ✅ زر تغيير اللغة (عربي ⇄ فرنسي)
const toggleBtn = document.getElementById("toggle-lang-btn");
let currentLang = "ar";

toggleBtn.addEventListener("click", () => {
  currentLang = currentLang === "ar" ? "fr" : "ar";
  applyLang(currentLang);
});

function applyLang(lang) {
  const translations = {
    "ar": {
      "toggle": "تبديل اللغة",
      "visit": `عدد زياراتك: ${localStorage.getItem("visits")}`,
      "radio": "▶️ شغّل الراديو",
      "whatsapp": "واتساب",
      "maps": "موقعنا على Google Maps",
      "photos": "شاهد الصور",
      "videos": "شاهد الفيديو",
    },
    "fr": {
      "toggle": "Changer la langue",
      "visit": `Nombre de visites: ${localStorage.getItem("visits")}`,
      "radio": "▶️ Lancer la radio",
      "whatsapp": "WhatsApp",
      "maps": "Notre position sur Google Maps",
      "photos": "Voir les photos",
      "videos": "Voir les vidéos",
    }
  };

  toggleBtn.textContent = translations[lang].toggle;
  document.getElementById('visit-count').textContent = translations[lang].visit;
  document.getElementById('radio-btn').textContent = translations[lang].radio;
  document.querySelector('.btn-whatsapp').textContent = translations[lang].whatsapp;
  document.querySelector('.btn-maps').textContent = translations[lang].maps;
  document.querySelector('.btn-gallery').textContent = translations[lang].photos;
  document.querySelector('.btn-video').textContent = translations[lang].videos;
}
