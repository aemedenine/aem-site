document.addEventListener('DOMContentLoaded', () => {
  // โ ุงูููุช ูุนุฏุฏ ุงูุฒูุงุฑุงุช
  function updateTime() {
    const now = new Date();
    const days = ['ุงูุฃุญุฏ','ุงูุฅุซููู','ุงูุซูุงุซุงุก','ุงูุฃุฑุจุนุงุก','ุงูุฎููุณ','ุงูุฌูุนุฉ','ุงูุณุจุช'];
    const months = ['ุฌุงููู','ูููุฑู','ูุงุฑุณ','ุฃูุฑูู','ูุงู','ุฌูุงู','ุฌููููุฉ','ุฃูุช','ุณุจุชูุจุฑ','ุฃูุชูุจุฑ','ููููุจุฑ','ุฏูุณูุจุฑ'];
    const day = days[now.getDay()];
    const date = now.getDate();
    const month = months[now.getMonth()];
    const h = now.getHours().toString().padStart(2, '0');
    const m = now.getMinutes().toString().padStart(2, '0');
    const s = now.getSeconds().toString().padStart(2, '0');
    document.getElementById('current-time').textContent = `${day} ${date} ${month} - ${h}:${m}:${s}`;
  }
  setInterval(updateTime, 1000);
  updateTime();

  let visits = localStorage.getItem('visit-count');
  visits = visits ? parseInt(visits) + 1 : 1;
  localStorage.setItem('visit-count', visits);
  document.getElementById('visit-count').textContent = `ุนุฏุฏ ุฒูุงุฑุงุชู: ${visits}`;

  // โ FAQ
  document.querySelectorAll('.faq-item h3').forEach(h3 => {
    h3.addEventListener('click', () => {
      h3.parentElement.classList.toggle('open');
    });
  });

  // โ ุฑุงุฏูู
  const radio = document.getElementById('radio-stream');
  const radioBtn = document.getElementById('radio-btn');
  let currentLang = document.documentElement.lang.startsWith('ar') ? 'ar' : 'fr';

  radioBtn.addEventListener('click', () => {
    if (radio.paused) {
      radio.play();
      radioBtn.textContent = currentLang === 'ar' ? 'โธ๏ธ ุฃููู ุงูุฑุงุฏูู' : 'โธ๏ธ Arrรชter la radio';
    } else {
      radio.pause();
      radioBtn.textContent = currentLang === 'ar' ? '๐ป ุดุบูู ุงูุฑุงุฏูู' : '๐ป รcouter la radio';
    }
  });

  // โ ุชุบููุฑ ุงููุบุฉ
  const toggleBtn = document.getElementById('toggle-lang-btn');
  toggleBtn.addEventListener('click', () => {
    const isArabic = currentLang === 'ar';
    document.documentElement.lang = isArabic ? 'fr' : 'ar';
    document.documentElement.dir = isArabic ? 'ltr' : 'rtl';
    currentLang = isArabic ? 'fr' : 'ar';

    // ูุตูุต ุญุณุจ ุงููุบุฉ
    document.querySelector('h1').textContent = isArabic ? "Atelier รlectronique Mรฉdenine" : "ูุฑุดุฉ ุฅููุชุฑูููู ูุฏููู";
    toggleBtn.textContent = isArabic ? "Changer la langue" : "ุชุจุฏูู ุงููุบุฉ";
    document.querySelector('.btn-whatsapp').textContent = isArabic ? "WhatsApp" : "ูุงุชุณุงุจ";
    document.querySelector('.btn-maps').textContent = isArabic ? "Voir sur Google Maps" : "ูููุนูุง ุนูู Google Maps";
    document.querySelector('.btn-gallery').textContent = isArabic ? "Voir les photos" : "ุดุงูุฏ ุงูุตูุฑ";
    document.querySelector('.btn-video').textContent = isArabic ? "Voir les vidรฉos" : "ุดุงูุฏ ุงูููุฏูู";
    document.querySelector('.btn-radio').textContent = radio.paused
      ? (isArabic ? "๐ป รcouter la radio" : "๐ป ุดุบูู ุงูุฑุงุฏูู")
      : (isArabic ? "โธ๏ธ Arrรชter la radio" : "โธ๏ธ ุฃููู ุงูุฑุงุฏูู");
    document.querySelector('.experience-badge').textContent = isArabic
      ? "๐ผ Plus de 10 ans d'expรฉrience"
      : "๐ผ ุฃูุซุฑ ูู 10 ุณููุงุช ุฎุจุฑุฉ";

    document.querySelector('footer p:nth-child(1)').textContent = isArabic
      ? "๐ Mรฉdenine โ Service dans toute la Tunisie | ๐ฒ WhatsApp: 98192103"
      : "๐ ูุฏููู โ ูุฎุฏูู ูู ูุงูู ุฃูุญุงุก ุชููุณ | ๐ฒ WhatsApp: 98192103";

    document.querySelector('footer p:nth-child(2)').textContent = isArabic
      ? "โฐ Du lundi au samedi, 08:00 - 18:00 | Dimanche fermรฉ"
      : "โฐ ูู ุงูุฅุซููู ููุณุจุชุ 08:00 - 18:00 | ุงูุฃุญุฏ ุฑุงุญุฉ";

    // FAQ ุจุงูุนุฑุจูุฉ ุฃู ุงููุฑูุณูุฉ
    const faqQuestions = isArabic
      ? ["Comment envoyer un appareil pour rรฉparation ?","Quelle est la durรฉe habituelle de rรฉparation ?","Fournissez-vous des piรจces d'origine ?","Comment suivre l'รฉtat de la rรฉparation ?"]
      : ["ููู ูููููู ุฅุฑุณุงู ุฌูุงุฒ ููุฅุตูุงุญุ","ูุง ูู ูุฏุฉ ุงูุชุตููุญ ุงููุนุชุงุฏุฉุ","ูู ุชููุฑูู ูุทุน ุบูุงุฑ ุฃุตููุฉุ","ููู ุฃุชุงุจุน ุญุงูุฉ ุงูุฅุตูุงุญุ"];

    const faqAnswers = isArabic
      ? ["Vous pouvez envoyer l'appareil par courrier ou nous contacter.","La durรฉe dรฉpend de la panne, gรฉnรฉralement moins de 3 jours.","Oui, piรจces d'origine de haute qualitรฉ.","Nous envoyons photos/vidรฉos via WhatsApp."]
      : ["ููููู ุฅุฑุณุงู ุงูุฌูุงุฒ ุนุจุฑ ุงูุจุฑูุฏ ุฃู ุงูุชูุณูู ูุนูุง.","ูุฏุฉ ุงูุชุตููุญ ุบุงูุจูุง ูุง ุชุชุฌุงูุฒ 3 ุฃูุงู.","ูุนูุ ูููุฑ ูุทุน ุฃุตููุฉ ุนุงููุฉ ุงูุฌูุฏุฉ.","ูุฑุณู ุตูุฑ ูููุฏูู ุนุจุฑ ูุงุชุณุงุจ."];

    document.querySelectorAll('.faq-item').forEach((item, i) => {
      item.querySelector('h3').textContent = faqQuestions[i];
      item.querySelector('.answer').textContent = faqAnswers[i];
      item.classList.remove('open');
    });
  });

  // โ ุงูุฃุฎุจุงุฑ ุงูููููุฉ (ุชุจุฏููุง ูุงุญูุงู ุจู RSS)
  const newsText = document.getElementById('live-news');
  newsText.textContent = "๐ข ูุฑุดุฉ ุฅููุชุฑูููู ุงูุฑุญูุงูู ูู ุฎุฏูุฉ ูู ุชููุณ โข ๐ง ุชุตููุญ ุงุญุชุฑุงูู ูุณุฑูุน โข ๐ฌ ูุฑุฌุนููู ุฌูุงุฒู ููุฏุงุฑ โข ๐ ุชูุงุตู ูุนูุง ุนูู ูุงุชุณุงุจ ุงูุขู";
});
