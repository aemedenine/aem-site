// Ø¹Ø±Ø¶ Ø§Ù„ÙˆÙ‚Øª ÙˆØ§Ù„ØªØ§Ø±ÙŠØ®
function updateClock() {
  const now = new Date();
  const lang = document.documentElement.lang || 'ar';
  const options = {
    weekday: 'long',
    year: 'numeric',
    month: 'long',
    day: 'numeric',
    hour: '2-digit',
    minute: '2-digit'
  };
  const formatter = new Intl.DateTimeFormat(lang === 'ar' ? 'ar-TN' : 'fr-FR', options);
  document.getElementById('clock').textContent = formatter.format(now);
}
setInterval(updateClock, 1000);
updateClock();

// Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø®Ø¨Ø§Ø± (RSS Ù…Ù† BBC Ø¹Ø±Ø¨ÙŠ)
async function fetchNews() {
  try {
    const response = await fetch("https://api.allorigins.win/get?url=" + encodeURIComponent("https://feeds.bbci.co.uk/arabic/rss.xml"));
    const data = await response.json();
    const parser = new DOMParser();
    const xml = parser.parseFromString(data.contents, "text/xml");
    const items = xml.querySelectorAll("item");
    const ticker = document.getElementById("news-ticker");
    let html = "";
    items.forEach((item, index) => {
      if (index < 5) {
        html += `ðŸ“¢ <a href="${item.querySelector("link").textContent}" target="_blank">${item.querySelector("title").textContent}</a> &nbsp;&nbsp;&nbsp;`;
      }
    });
    ticker.innerHTML = html;
  } catch (error) {
    document.getElementById("news-ticker").textContent = "âš ï¸ ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±.";
  }
}
fetchNews();

// ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ©
document.getElementById("lang-switcher").addEventListener("click", () => {
  const html = document.documentElement;
  html.lang = html.lang === "ar" ? "fr" : "ar";
  updateClock();
  translateContent();
});

function translateContent() {
  const lang = document.documentElement.lang;
  const translations = {
    ar: {
      whatsapp: "Ø±Ø§Ø³Ù„Ù†Ø§ Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨",
      maps: "Ù…ÙˆÙ‚Ø¹ Ø§Ù„ÙˆØ±Ø´Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©",
      qr: "ðŸ“± Ø§Ù…Ø³Ø­ Ù„Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹",
      location: "Ù…Ø¯Ù†ÙŠÙ† â€“ Ù†Ø®Ø¯Ù…Ùˆ ÙÙŠ ÙƒØ§Ù…Ù„ Ø£Ù†Ø­Ø§Ø¡ ØªÙˆÙ†Ø³",
      hours: "Ù…Ù† Ø§Ù„Ø¥Ø«Ù†ÙŠÙ† Ù„Ù„Ø³Ø¨ØªØŒ 08:00 - 18:00 | Ø§Ù„Ø£Ø­Ø¯ Ø±Ø§Ø­Ø©",
    },
    fr: {
      whatsapp: "Contactez-nous sur WhatsApp",
      maps: "Localisation de l'atelier",
      qr: "ðŸ“± Scannez pour un accÃ¨s rapide",
      location: "Medenine â€“ Service dans toute la Tunisie",
      hours: "Du lundi au samedi, 08:00 - 18:00 | Dimanche fermÃ©",
    }
  };
  document.getElementById("whatsapp-btn").textContent = translations[lang].whatsapp;
  document.getElementById("maps-btn").textContent = translations[lang].maps;
  document.getElementById("qr-text").textContent = translations[lang].qr;
  document.getElementById("location-text").textContent = translations[lang].location;
  document.getElementById("hours-text").textContent = translations[lang].hours;
}
translateContent();

// Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø© (FAQ toggle)
document.querySelectorAll(".faq-question").forEach((question) => {
  question.addEventListener("click", () => {
    const answer = question.nextElementSibling;
    answer.style.display = answer.style.display === "block" ? "none" : "block";
  });
});
