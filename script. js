// script.js - ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…ÙˆÙ‚Ø¹

// Ø¹Ø±Ø¶ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ ÙˆØ§Ù„Ø´Ù‡Ø±
function updateTime() {
  const now = new Date();
  const time = now.toLocaleTimeString('ar-TN');
  const month = now.toLocaleDateString('ar-TN', { month: 'long' });
  document.getElementById('current-time').textContent = `ðŸ•’ ${time} - ${month}`;
}
setInterval(updateTime, 1000);
updateTime();

// Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª Ø¹Ø¨Ø± localStorage
const visits = localStorage.getItem('visits') || 0;
localStorage.setItem('visits', parseInt(visits) + 1);
document.getElementById('visit-count').textContent = `Ø¹Ø¯Ø¯ Ø²ÙŠØ§Ø±Ø§ØªÙƒ: ${parseInt(visits) + 1}`;

// ØªØ´ØºÙŠÙ„ ÙˆØ¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø±Ø§Ø¯ÙŠÙˆ
const radioBtn = document.getElementById('radio-btn');
const radio = document.getElementById('radio-stream');
let isPlaying = false;

if (radioBtn && radio) {
  radioBtn.addEventListener('click', () => {
    if (isPlaying) {
      radio.pause();
      radioBtn.textContent = 'Ø´ØºÙ‘Ù„ Ø§Ù„Ø±Ø§Ø¯ÙŠÙˆ';
    } else {
      radio.play();
      radioBtn.textContent = 'Ø£ÙˆÙ‚Ù Ø§Ù„Ø±Ø§Ø¯ÙŠÙˆ';
    }
    isPlaying = !isPlaying;
  });
}

// Ø¬Ù„Ø¨ Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ù…Ù† BBC Arabic RSS
async function fetchNews() {
  try {
    const response = await fetch("https://api.rss2json.com/v1/api.json?rss_url=https://feeds.bbci.co.uk/arabic/rss.xml");
    const data = await response.json();
    const newsItems = data.items.slice(0, 5);
    const newsText = newsItems.map(item => `<a href='${item.link}' target='_blank'>${item.title}</a>`).join(" ðŸ”¸ ");
    document.getElementById("live-news").innerHTML = newsText;
  } catch (error) {
    document.getElementById("live-news").textContent = "ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±.";
  }
}
fetchNews();

// ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ© Ø¨ÙŠÙ† Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙˆØ§Ù„ÙØ±Ù†Ø³ÙŠØ©
let isArabic = true;
const langBtn = document.getElementById('toggle-lang-btn');
langBtn.addEventListener('click', () => {
  isArabic = !isArabic;
  document.documentElement.lang = isArabic ? 'ar' : 'fr';
  document.documentElement.dir = isArabic ? 'rtl' : 'ltr';
  langBtn.textContent = isArabic ? 'ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ©' : 'Changer la langue';
  document.getElementById('visit-count').textContent = isArabic
    ? `Ø¹Ø¯Ø¯ Ø²ÙŠØ§Ø±Ø§ØªÙƒ: ${localStorage.getItem('visits')}`
    : `Nombre de visites : ${localStorage.getItem('visits')}`;
});

// Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø© ØªÙØ§Ø¹Ù„ÙŠØ©
const faqItems = document.querySelectorAll('.faq-item');
faqItems.forEach(item => {
  item.addEventListener('click', () => {
    faqItems.forEach(i => i.classList.remove('open'));
    item.classList.toggle('open');
  });
});
