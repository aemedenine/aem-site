<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª - Atelier Electronique MÃ©denine</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    main {
      max-width: 1100px;
      margin: 30px auto 60px;
      padding: 0 15px;
      text-align: center;
    }
    h2 {
      color: #00bfff;
      margin-bottom: 25px;
      user-select: none;
    }
    .video-player {
      max-width: 720px;
      margin: 0 auto 25px;
      background: #111;
      border-radius: 10px;
      box-shadow: 0 0 15px #00bfff88;
      padding: 10px;
    }
    video {
      width: 100%;
      border-radius: 6px;
      background: black;
    }
    .video-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 15px;
    }
    .video-item {
      background: #1e1e1e;
      border-radius: 8px;
      padding: 8px;
      cursor: pointer;
      box-shadow: 0 0 12px #00bfff88;
      transition: transform 0.3s ease;
      color: #eee;
    }
    .video-item:hover {
      transform: scale(1.05);
      background: #007acc;
    }
    .video-item.active {
      border: 2px solid #00bfff;
      background: #004d99;
    }
    .video-title {
      margin: 8px 0 5px;
      font-weight: bold;
    }
    .reactions {
      margin-top: 8px;
      display: flex;
      justify-content: center;
      gap: 12px;
    }
    .reactions button {
      background-color: #333;
      border: none;
      padding: 6px 14px;
      font-size: 18px;
      color: white;
      border-radius: 6px;
      cursor: pointer;
      user-select: none;
      transition: background-color 0.3s ease;
    }
    .reactions button:hover {
      background-color: #00bfff;
      color: black;
    }
    .comment-box {
      margin-top: 15px;
      text-align: left;
    }
    .comment-box textarea {
      width: 100%;
      height: 70px;
      padding: 8px;
      font-size: 14px;
      border-radius: 6px;
      border: 1px solid #666;
      background: #000;
      color: #eee;
      resize: vertical;
    }
    .comment-box button {
      margin-top: 8px;
      background-color: #00bfff;
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      color: black;
      font-weight: bold;
      cursor: pointer;
      user-select: none;
      transition: background-color 0.3s ease;
    }
    .comment-box button:hover {
      background-color: #008ecc;
    }
    .comments-list {
      margin-top: 15px;
      max-height: 180px;
      overflow-y: auto;
      background: #111;
      padding: 10px;
      border-radius: 6px;
      font-size: 0.9rem;
      color: #ddd;
    }
    .comment {
      margin-bottom: 8px;
      padding-bottom: 4px;
      border-bottom: 1px solid #333;
    }
  </style>
</head>
<body>

  <header>
    <div class="logo">
      <img src="logo.png" alt="Logo" />
      <span class="logo-text">Atelier Electronique MÃ©denine</span>
    </div>
    <nav>
      <a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
      <a href="photos.html">Ø§Ù„ØµÙˆØ±</a>
      <a href="videos.html" class="active">Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</a>
      <a href="services.html">Ø®Ø¯Ù…Ø§Øª Ø§Ù„ÙˆØ±Ø´Ø©</a>
    </nav>
  </header>

  <main>
    <h2>Ù…Ø¹Ø±Ø¶ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª</h2>

    <div class="video-player">
      <video id="main-video" controls preload="metadata" src="video1.mp4" poster="thumb1.jpg"></video>
      <div class="reactions">
        <button data-reaction="like" title="Ø¬Ø§Ù… â¤ï¸">â¤ï¸</button>
        <button data-reaction="love" title="Ø¬Ø§Ø¯ÙˆØ± ğŸ˜">ğŸ˜</button>
        <button data-reaction="laugh" title="Ø¶Ø­Ùƒ ğŸ˜‚">ğŸ˜‚</button>
      </div>
      <div class="comment-box">
        <textarea id="comment-input" placeholder="Ø§ÙƒØªØ¨ ØªØ¹Ù„ÙŠÙ‚Ùƒ Ù‡Ù†Ø§..."></textarea>
        <button id="add-comment-btn">Ø£Ø¶Ù ØªØ¹Ù„ÙŠÙ‚</button>
      </div>
      <div class="comments-list" id="comments-list"></div>
    </div>

    <div class="video-list" id="video-list">
      <div class="video-item active" data-src="video1.mp4" data-poster="videos/thumb1.jpg" data-id="video1">
        <div class="video-title">ÙÙŠØ¯ÙŠÙˆ 1: Ø¥ØµÙ„Ø§Ø­ Ù„ÙˆØ­Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</div>
      </div>
      <div class="video-item" data-src="video2.mp4" data-poster="videos/thumb2.jpg" data-id="video2">
        <div class="video-title">ÙÙŠØ¯ÙŠÙˆ 2: ØµÙŠØ§Ù†Ø© Ø«Ù„Ø§Ø¬Ø© Ø¥Ù†ÙØ±ØªØ±</div>
      </div>
      <div class="video-item" data-src="videos/video3.mp4" data-poster="videos/thumb3.jpg" data-id="video3">
        <div class="video-title">ÙÙŠØ¯ÙŠÙˆ 3: ØªØ´Ø®ÙŠØµ Ø§Ù„Ø£Ø¹Ø·Ø§Ù„ Ø¨Ø¯Ù‚Ø©</div>
      </div>
      <!-- Ø£Ø¶Ù Ø§Ù„Ù…Ø²ÙŠØ¯ Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ø¬Ø© -->
    </div>
  </main>

  <footer>
    Â© 2025 Atelier Electronique MÃ©denine - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©
  </footer>

  <script>
    const videoList = document.getElementById('video-list');
    const mainVideo = document.getElementById('main-video');
    const commentsList = document.getElementById('comments-list');
    const commentInput = document.getElementById('comment-input');
    const addCommentBtn = document.getElementById('add-comment-btn');
    const reactionButtons = document.querySelectorAll('.reactions button');

    let currentVideoId = 'video1';

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙØ§Ø¹Ù„Ø§Øª ÙˆØ§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ù…Ù† localStorage
    function loadData() {
      const reactionsData = JSON.parse(localStorage.getItem('videoReactions')) || {};
      const commentsData = JSON.parse(localStorage.getItem('videoComments')) || {};

      // Ø¹Ø±Ø¶ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ù„Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø­Ø§Ù„ÙŠ
      displayComments(commentsData[currentVideoId] || []);

      // ØªÙ‡ÙŠØ¦Ø© Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙØ§Ø¹Ù„
      reactionButtons.forEach(btn => {
        const reaction = btn.getAttribute('data-reaction');
        const count = reactionsData[currentVideoId]?.[reaction] || 0;
        btn.textContent = reaction === 'like' ? `â¤ï¸ ${count}` : reaction === 'love' ? `ğŸ˜ ${count}` : `ğŸ˜‚ ${count}`;
      });
    }

    // Ø­ÙØ¸ Ø§Ù„ØªÙØ§Ø¹Ù„Ø§Øª ÙˆØ§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª ÙÙŠ localStorage
    function saveData(reactionsData, commentsData) {
      localStorage.setItem('videoReactions', JSON.stringify(reactionsData));
      localStorage.setItem('videoComments', JSON.stringify(commentsData));
    }

    // Ø¹Ø±Ø¶ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª
    function displayComments(comments) {
      commentsList.innerHTML = '';
      if (comments.length === 0) {
        commentsList.innerHTML = '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†.</p>';
        return;
      }
      comments.forEach(comment => {
        const div = document.createElement('div');
        div.className = 'comment';
        div.textContent = comment;
        commentsList.appendChild(div);
      });
    }

    // ØªØºÙŠÙŠØ± Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
    videoList.addEventListener('click', e => {
      let item = e.target;
      while (item && !item.classList.contains('video-item')) {
        item = item.parentElement;
      }
      if (!item) return;

      if (item.classList.contains('active')) return; // Ù†ÙØ³ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ

      // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
      const src = item.getAttribute('data-src');
      const poster = item.getAttribute('data-poster');
      const videoId = item.getAttribute('data-id');

      mainVideo.src = src;
      mainVideo.poster = poster;
      mainVideo.play();

      // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ­Ø¯ÙŠØ¯
      document.querySelectorAll('.video-item').forEach(v => v.classList.remove('active'));
      item.classList.add('active');

      currentVideoId = videoId;
      loadData();
    });

    // Ø¥Ø¶Ø§ÙØ© ØªØ¹Ù„ÙŠÙ‚
    addCommentBtn.addEventListener('click', () => {
      const text = commentInput.value.trim();
      if (text === '') return alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© ØªØ¹Ù„ÙŠÙ‚.');

      let commentsData = JSON.parse(localStorage.getItem('videoComments')) || {};
      if (!commentsData[currentVideoId]) commentsData[currentVideoId] = [];
      commentsData[currentVideoId].push(text);

      saveData(JSON.parse(localStorage.getItem('videoReactions')) || {}, commentsData);
      displayComments(commentsData[currentVideoId]);

      commentInput.value = '';
    });

    // Ø§Ù„ØªÙØ§Ø¹Ù„ (Ø¬Ø§Ù…ØŒ Ø¬Ø§Ø¯ÙˆØ±ØŒ Ø¶Ø­Ùƒ)
    reactionButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        const reaction = btn.getAttribute('data-reaction');

        let reactionsData = JSON.parse(localStorage.getItem('videoReactions')) || {};
        if (!reactionsData[currentVideoId]) {
          reactionsData[currentVideoId] = { like: 0, love: 0, laugh: 0 };
        }
        reactionsData[currentVideoId][reaction]++;

        saveData(reactionsData, JSON.parse(localStorage.getItem('videoComments')) || {});
        loadData();
      });
    });

    // ØªØ­Ù…ÙŠÙ„ Ø£ÙˆÙ„ Ù…Ø±Ø©
    loadData();
  </script>

</body>
</html>
