<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>فيديوهات - Atelier Electronique Médenine</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    main {
      max-width: 1100px;
      margin: 30px auto 60px;
      padding: 0 15px;
      text-align: center;
    }
    h2 {
      color: #00bfff;
      margin-bottom: 25px;
      user-select: none;
    }
    .video-player {
      max-width: 720px;
      margin: 0 auto 25px;
      background: #111;
      border-radius: 10px;
      box-shadow: 0 0 15px #00bfff88;
      padding: 10px;
    }
    video {
      width: 100%;
      border-radius: 6px;
      background: black;
    }
    .video-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 15px;
    }
    .video-item {
      background: #1e1e1e;
      border-radius: 8px;
      padding: 8px;
      cursor: pointer;
      box-shadow: 0 0 12px #00bfff88;
      transition: transform 0.3s ease;
      color: #eee;
    }
    .video-item:hover {
      transform: scale(1.05);
      background: #007acc;
    }
    .video-item.active {
      border: 2px solid #00bfff;
      background: #004d99;
    }
    .video-title {
      margin: 8px 0 5px;
      font-weight: bold;
    }
    .reactions {
      margin-top: 8px;
      display: flex;
      justify-content: center;
      gap: 12px;
    }
    .reactions button {
      background-color: #333;
      border: none;
      padding: 6px 14px;
      font-size: 18px;
      color: white;
      border-radius: 6px;
      cursor: pointer;
      user-select: none;
      transition: background-color 0.3s ease;
    }
    .reactions button:hover {
      background-color: #00bfff;
      color: black;
    }
    .comment-box {
      margin-top: 15px;
      text-align: left;
    }
    .comment-box textarea {
      width: 100%;
      height: 70px;
      padding: 8px;
      font-size: 14px;
      border-radius: 6px;
      border: 1px solid #666;
      background: #000;
      color: #eee;
      resize: vertical;
    }
    .comment-box button {
      margin-top: 8px;
      background-color: #00bfff;
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      color: black;
      font-weight: bold;
      cursor: pointer;
      user-select: none;
      transition: background-color 0.3s ease;
    }
    .comment-box button:hover {
      background-color: #008ecc;
    }
    .comments-list {
      margin-top: 15px;
      max-height: 180px;
      overflow-y: auto;
      background: #111;
      padding: 10px;
      border-radius: 6px;
      font-size: 0.9rem;
      color: #ddd;
    }
    .comment {
      margin-bottom: 8px;
      padding-bottom: 4px;
      border-bottom: 1px solid #333;
    }
  </style>
</head>
<body>

  <header>
    <div class="logo">
      <img src="logo.png" alt="Logo" />
      <span class="logo-text">Atelier Electronique Médenine</span>
    </div>
    <nav>
      <a href="index.html">الرئيسية</a>
      <a href="photos.html">الصور</a>
      <a href="videos.html" class="active">الفيديو</a>
      <a href="services.html">خدمات الورشة</a>
    </nav>
  </header>

  <main>
    <h2>معرض الفيديوهات</h2>

    <div class="video-player">
      <video id="main-video" controls preload="metadata" src="video1.mp4" poster="thumb1.jpg"></video>
      <div class="reactions">
        <button data-reaction="like" title="جام ❤️">❤️</button>
        <button data-reaction="love" title="جادور 😍">😍</button>
        <button data-reaction="laugh" title="ضحك 😂">😂</button>
      </div>
      <div class="comment-box">
        <textarea id="comment-input" placeholder="اكتب تعليقك هنا..."></textarea>
        <button id="add-comment-btn">أضف تعليق</button>
      </div>
      <div class="comments-list" id="comments-list"></div>
    </div>

    <div class="video-list" id="video-list">
      <div class="video-item active" data-src="video1.mp4" data-poster="videos/thumb1.jpg" data-id="video1">
        <div class="video-title">فيديو 1: إصلاح لوحة إلكترونية</div>
      </div>
      <div class="video-item" data-src="video2.mp4" data-poster="videos/thumb2.jpg" data-id="video2">
        <div class="video-title">فيديو 2: صيانة ثلاجة إنفرتر</div>
      </div>
      <div class="video-item" data-src="videos/video3.mp4" data-poster="videos/thumb3.jpg" data-id="video3">
        <div class="video-title">فيديو 3: تشخيص الأعطال بدقة</div>
      </div>
      <!-- أضف المزيد حسب الحاجة -->
    </div>
  </main>

  <footer>
    © 2025 Atelier Electronique Médenine - جميع الحقوق محفوظة
  </footer>

  <script>
    const videoList = document.getElementById('video-list');
    const mainVideo = document.getElementById('main-video');
    const commentsList = document.getElementById('comments-list');
    const commentInput = document.getElementById('comment-input');
    const addCommentBtn = document.getElementById('add-comment-btn');
    const reactionButtons = document.querySelectorAll('.reactions button');

    let currentVideoId = 'video1';

    // تحميل التفاعلات والتعليقات من localStorage
    function loadData() {
      const reactionsData = JSON.parse(localStorage.getItem('videoReactions')) || {};
      const commentsData = JSON.parse(localStorage.getItem('videoComments')) || {};

      // عرض التعليقات للفيديو الحالي
      displayComments(commentsData[currentVideoId] || []);

      // تهيئة أزرار التفاعل
      reactionButtons.forEach(btn => {
        const reaction = btn.getAttribute('data-reaction');
        const count = reactionsData[currentVideoId]?.[reaction] || 0;
        btn.textContent = reaction === 'like' ? `❤️ ${count}` : reaction === 'love' ? `😍 ${count}` : `😂 ${count}`;
      });
    }

    // حفظ التفاعلات والتعليقات في localStorage
    function saveData(reactionsData, commentsData) {
      localStorage.setItem('videoReactions', JSON.stringify(reactionsData));
      localStorage.setItem('videoComments', JSON.stringify(commentsData));
    }

    // عرض التعليقات
    function displayComments(comments) {
      commentsList.innerHTML = '';
      if (comments.length === 0) {
        commentsList.innerHTML = '<p>لا توجد تعليقات حتى الآن.</p>';
        return;
      }
      comments.forEach(comment => {
        const div = document.createElement('div');
        div.className = 'comment';
        div.textContent = comment;
        commentsList.appendChild(div);
      });
    }

    // تغيير الفيديو
    videoList.addEventListener('click', e => {
      let item = e.target;
      while (item && !item.classList.contains('video-item')) {
        item = item.parentElement;
      }
      if (!item) return;

      if (item.classList.contains('active')) return; // نفس الفيديو

      // تحديث الفيديو
      const src = item.getAttribute('data-src');
      const poster = item.getAttribute('data-poster');
      const videoId = item.getAttribute('data-id');

      mainVideo.src = src;
      mainVideo.poster = poster;
      mainVideo.play();

      // تحديث التحديد
      document.querySelectorAll('.video-item').forEach(v => v.classList.remove('active'));
      item.classList.add('active');

      currentVideoId = videoId;
      loadData();
    });

    // إضافة تعليق
    addCommentBtn.addEventListener('click', () => {
      const text = commentInput.value.trim();
      if (text === '') return alert('الرجاء كتابة تعليق.');

      let commentsData = JSON.parse(localStorage.getItem('videoComments')) || {};
      if (!commentsData[currentVideoId]) commentsData[currentVideoId] = [];
      commentsData[currentVideoId].push(text);

      saveData(JSON.parse(localStorage.getItem('videoReactions')) || {}, commentsData);
      displayComments(commentsData[currentVideoId]);

      commentInput.value = '';
    });

    // التفاعل (جام، جادور، ضحك)
    reactionButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        const reaction = btn.getAttribute('data-reaction');

        let reactionsData = JSON.parse(localStorage.getItem('videoReactions')) || {};
        if (!reactionsData[currentVideoId]) {
          reactionsData[currentVideoId] = { like: 0, love: 0, laugh: 0 };
        }
        reactionsData[currentVideoId][reaction]++;

        saveData(reactionsData, JSON.parse(localStorage.getItem('videoComments')) || {});
        loadData();
      });
    });

    // تحميل أول مرة
    loadData();
  </script>

</body>
</html>
