<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Atelier Electronique Mรฉdenine</title>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

  <style>
    /* (ุถุน ููุง ููุณ ุงูู CSS ุงููู ุฃุนุทูุชูู ุณุงุจูุงู) */
    /* ... ูู ุงูุณุชุงูู ุงููู ูุชุจุชู ูู ูุจู */
  </style>
</head>
<body>
  <!-- ... ููุณ ูููู ุงูุตูุญุฉ ุงููู ุฃุนุทูุชูู ุฅูุงู (header, info-bar, news-ticker, ... ) -->

  <div class="gallery">
    <div class="media-item" data-id="img1">
      <img src="Tech.jpg" alt="ุตูุฑุฉ ูู ุงููุฑุดุฉ" onclick="openLightbox(this.src)" />
      <div class="reactions">
        <button onclick="addReaction('img1', '๐')">๐</button>
        <button onclick="addReaction('img1', 'โค๏ธ')">โค๏ธ</button>
        <button onclick="addReaction('img1', '๐')">๐</button>
      </div>
      <div class="comment-box">
        <textarea placeholder="ุงูุชุจ ุชุนูููู ููุง..." id="comment-input-img1"></textarea><br/>
        <button onclick="addComment('img1')">ุฃุฑุณู</button>
      </div>
      <div class="comments-list" id="comments-img1"></div>
    </div>

    <div class="media-item" data-id="img2">
      <img src="Hh.png" alt="ุฅุตูุงุญ ุฅููุชุฑููู" onclick="openLightbox(this.src)" />
      <div class="reactions">
        <button onclick="addReaction('img2', '๐')">๐</button>
        <button onclick="addReaction('img2', 'โค๏ธ')">โค๏ธ</button>
        <button onclick="addReaction('img2', '๐')">๐</button>
      </div>
      <div class="comment-box">
        <textarea placeholder="ุงูุชุจ ุชุนูููู ููุง..." id="comment-input-img2"></textarea><br/>
        <button onclick="addComment('img2')">ุฃุฑุณู</button>
      </div>
      <div class="comments-list" id="comments-img2"></div>
    </div>
  </div>

  <!-- ... ุจููุฉ ุงูุตูุญุฉ (FAQ, footer, etc) ... -->

  <div id="lightbox" class="lightbox" onclick="closeLightbox()">
    <img id="lightbox-img" src="" alt="" />
  </div>

  <script>
    // ุฅุนุฏุงุฏ Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyD5Hrfk6tU22ITquRR3xt957WmlnvPTw5M",
      authDomain: "aem-site-4e030.firebaseapp.com",
      projectId: "aem-site-4e030",
      storageBucket: "aem-site-4e030.appspot.com",
      messagingSenderId: "241838556898",
      appId: "1:241838556898:web:9eb591e3d05405894800bb",
      measurementId: "G-DTNBCK5H1F"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // ูุชุญ ุงููุงูุชุจููุณ
    function openLightbox(src) {
      const lightbox = document.getElementById('lightbox');
      const lightboxImg = document.getElementById('lightbox-img');
      lightboxImg.src = src;
      lightbox.style.display = 'flex';
    }

    function closeLightbox() {
      document.getElementById('lightbox').style.display = 'none';
    }

    // ุฅุถุงูุฉ ุชูุงุนู (ูุงููุ ุญุจุ ุชุตููู)
    function addReaction(mediaId, reaction) {
      db.collection("reactions").add({
        mediaId,
        reaction,
        timestamp: new Date()
      }).then(() => {
        alert(`ุดูุฑุงู ุนูู ุชูุงุนูู ${reaction} ููุตูุฑุฉ/ุงูููุฏูู ุฑูู ${mediaId}`);
      }).catch((error) => {
        alert("ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุชุณุฌูู ุงูุชูุงุนู.");
        console.error(error);
      });
    }

    // ุฅุถุงูุฉ ุชุนููู
    function addComment(mediaId) {
      const textarea = document.getElementById(`comment-input-${mediaId}`);
      const commentText = textarea.value.trim();
      if (!commentText) {
        alert('ุงูุฑุฌุงุก ูุชุงุจุฉ ุชุนููู ูุจู ุงูุฅุฑุณุงู');
        return;
      }
      db.collection("comments").add({
        mediaId,
        comment: commentText,
        timestamp: new Date()
      }).then(() => {
        alert("ุชู ุฅุถุงูุฉ ุชุนูููู ุจูุฌุงุญ.");
        textarea.value = '';
        const commentsList = document.getElementById(`comments-${mediaId}`);
        const newComment = document.createElement('div');
        newComment.classList.add('comment');
        newComment.textContent = commentText;
        commentsList.appendChild(newComment);
      }).catch((error) => {
        alert("ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุฅุถุงูุฉ ุงูุชุนููู.");
        console.error(error);
      });
    }

    // ุจุงูู ุงูุณูุฑูุจุช (ููุชุ ุฃุฎุจุงุฑุ FAQุ ุชุบููุฑ ูุบุฉุ ุฑุงุฏูู...)
    document.addEventListener('DOMContentLoaded', () => {
      // ุชุญุฏูุซ ุงูููุชุ ุงูุฃุฎุจุงุฑุ FAQ toggle, ุชุบููุฑ ุงููุบุฉ ... (ููุณ ููุฏู ุงูุณุงุจู)
      // ... 
    });
  </script>
</body>
</html>
